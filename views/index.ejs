<%- include('./partials/header')%>
<%- include('./partials/nav')%>
<div class="main-container">
    <div class="show-case">
        <nav class="show-item show-case-nav flex">
            <li id="nav-item1" class="nav-item">Laptops</li>
            <li id="nav-item2" class="nav-item">Desktop Computers</li>
            <li id="nav-item3" class="nav-item">Printers</li>
            <li id="nav-item4" class="nav-item">Computer Accessories</li>
            <li id="nav-item5" class="nav-item">Office supplies</li>
        </nav>
        <div class="show-item show-case-content">
            <div class="slide">
                <img src="/images/add1.png" alt="">
                <img src="/images/add2.png" alt="">
                <img src="/images/addmain.jpg" alt="">
            </div>
            <div class="slide">
                <img src="/images/add4.png" alt="">
                <img src="/images/add5.png" alt="">
                <img src="/images/addmain.jpg" alt="">
            </div>
            <div class="slide">
                <img src="/images/add6.png" alt="">
                <img src="/images/add7.png" alt="">
                <img src="/images/addmain.jpg" alt="">
            </div>
        </div>
        <div class="flex show-item show-case-cta">
            <a href="">
                <img src="/images/icons/call.svg" alt="">
                Call&nbsp;to order
            </a>
            <a href="">
                <img src="/images/icons/mail.svg" alt="">
                Email&nbsp;us 
            </a>
            <a href="">
                <img src="/images/icons/whatsapp.svg" alt="">
                Let's&nbsp;Chat 
            </a>
        </div>
    </div>
</div>
<!-- top sales -->
<section class="top-selling-items main-container">
    <h3>Top selling items</h3>
    <div class="products flex">
        <%if(true){%>
        <%let count = 0 %>
        <% for(let i=0; i< products.length; i++){ %>
        <%if(count===4){break;} %>
        <%count++%>
        <div class="product flex">
            <a href="/product/<%=products[i].id%>">
            <div class="product-img">
                <img src="/images/productImages/<%=products[i].images.split(',')[0]%>" alt="">
            </div>
            </a>
            <p class="name"><%=products[i].name%></p>
            <p class="description"><%=products[i].specifications.slice(0,45)%>...</p>
            <%let n =products[i].price.toString().length%>
            <%if(n>3){%>
                <p class="price">KSH. <%=products[i].price.toString().slice(0,n-3) + ',' + products[i].price.toString().slice(n-3)%></p>
            <%}else{%>
                <p class="price">KSH. <%=products[i].price%></p>
            <%}%>
            <div class="ratings flex">
                <p>rated: 0</p>
                <p>0 reviews</p>
            </div>
            <%if(!locals.isLoggedIn){%>
                <div class="add-to-cart add-to-cart-btn">
                    +&nbsp;ADD&nbsp;TO&nbsp;CART
                </div>
            <%}else{%>
                <form class="add-to-cart add-to-cart-link" action="/add-to-cart?pId=<%=products[i].id%>&pName=<%=products[i].name%>&location=," method="post">
                    <input type="submit" value="+ ADD TO CART">
                </form>
            <%}%>
        </div> 
        <%}%>
        <%}%>
        <div class="view-more-btn flex">
            <a href="/products?category=topsales">
                <p>&#8921;</p>
                <p>VIEW&nbsp;MORE</p>
            </a>
        </div>
    </div>
</section>

<!-- laptops -->
<section class="laptops main-container">
    <h3>Laptops</h3>

        <div class="products flex">
            <%if(true){%>
            <%let count = 0 %>
            <% for(let i=0; i< products.length; i++){ %>
            <%if(count===4){break;} %>
            <%count++%>
            <%if(products[i].category === 'laptop'){%>
            <div class="product flex">
                <a href="/product/<%=products[i].id%>">
                <div class="product-img">
                    <img src="/images/productImages/<%=products[i].images.split(',')[0]%>" alt="">
                </div>
                </a>
                <p class="name"><%=products[i].name%></p>
                <p class="description"><%=products[i].specifications.slice(0,45)%>...</p>
                <%let n =products[i].price.toString().length%>
                <%if(n>3){%>
                    <p class="price">KSH. <%=products[i].price.toString().slice(0,n-3) + ',' + products[i].price.toString().slice(n-3)%></p>
                <%}else{%>
                    <p class="price">KSH. <%=products[i].price%></p>
                <%}%>
                <div class="ratings flex">
                    <p>rated: 0</p>
                    <p>0 reviews</p>
                </div>
                <%if(!locals.isLoggedIn){%>
                    <div class="add-to-cart add-to-cart-btn">
                        +&nbsp;ADD&nbsp;TO&nbsp;CART
                    </div>
                <%}else{%>
                    <form class="add-to-cart add-to-cart-link" action="/add-to-cart?pId=<%=products[i].id%>&pName=<%=products[i].name%>&location=," method="post">
                        <input type="submit" value="+ ADD TO CART">
                    </form>
                <%}%>
            </div> 
            <%}else{count--}%>
            <%}%>
            <%}%>
            <div class="view-more-btn flex">
                <a href="/products?category=laptop">
                    <p>&#8921;</p>
                    <p>VIEW&nbsp;MORE</p>
                </a>
            </div>
        </div>
</section>

<!-- printers -->
<section class="printers main-container">
    <h3>Printers</h3>
    <div class="products flex">
        <%if(true){%>
        <%let count = 0 %>
        <% for(let i=0; i< products.length; i++){ %>
        <%if(count===4){break;} %>
        <%count++%>
        <%if(products[i].category === 'printer'){%>
        <div class="product flex">
            <a href="/product/<%=products[i].id%>">
            <div class="product-img">
                <img src="/images/productImages/<%=products[i].images.split(',')[0]%>" alt="">
            </div>
            </a>
            <p class="name"><%=products[i].name%></p>
            <p class="description"><%=products[i].specifications.slice(0,45)%>...</p>
            <%let n =products[i].price.toString().length%>
            <%if(n>3){%>
                <p class="price">KSH. <%=products[i].price.toString().slice(0,n-3) + ',' + products[i].price.toString().slice(n-3)%></p>
            <%}else{%>
                <p class="price">KSH. <%=products[i].price%></p>
            <%}%>            
            <div class="ratings flex">
                <p>rated: 0</p>
                <p>0 reviews</p>
            </div>
            <%if(!locals.isLoggedIn){%>
                <div class="add-to-cart add-to-cart-btn">
                    +&nbsp;ADD&nbsp;TO&nbsp;CART
                </div>
            <%}else{%>
                <form class="add-to-cart add-to-cart-link" action="/add-to-cart?pId=<%=products[i].id%>&pName=<%=products[i].name%>&location=," method="post">
                    <input type="submit" value="+ ADD TO CART">
                </form>
            <%}%>
        </div> 
        <%}else{count--}%>
        <%}%>
        <%}%>
        <div class="view-more-btn flex">
            <a href="/products?category=printer">
                <p>&#8921;</p>
                <p>VIEW&nbsp;MORE</p>
            </a>
        </div>
    </div>
</section>

<!-- desktop computers -->
<section class="desktops main-container">
    <h3>Desktop Computers</h3>
    <div class="products flex">
        <%if(true){%>
        <%let count = 0 %>
        <% for(let i=0; i< products.length; i++){ %>
        <%if(count===4){break;} %>
        <%count++%>
        <%if(products[i].category === 'desktop'){%>
        <div class="product flex">
            <a href="/product/<%=products[i].id%>">
            <div class="product-img">
                <img src="/images/productImages/<%=products[i].images.split(',')[0]%>" alt="">
            </div>
            </a>
            <p class="name"><%=products[i].name%></p>
            <p class="description"><%=products[i].specifications.slice(0,45)%>...</p>
            <%let n =products[i].price.toString().length%>
            <%if(n>3){%>
                <p class="price">KSH. <%=products[i].price.toString().slice(0,n-3) + ',' + products[i].price.toString().slice(n-3)%></p>
            <%}else{%>
                <p class="price">KSH. <%=products[i].price%></p>
            <%}%>            
            <div class="ratings flex">
                <p>rated: 0</p>
                <p>0 reviews</p>
            </div>
            <%if(!locals.isLoggedIn){%>
                <div class="add-to-cart add-to-cart-btn">
                    +&nbsp;ADD&nbsp;TO&nbsp;CART
                </div>
            <%}else{%>
                <form class="add-to-cart add-to-cart-link" action="/add-to-cart?pId=<%=products[i].id%>&pName=<%=products[i].name%>&location=," method="post">
                    <input type="submit" value="+ ADD TO CART">
                </form>
            <%}%>
        </div> 
        <%}else{count--}%>
        <%}%>
        <%}%>
        <div class="view-more-btn flex">
            <a href="/products?category=desktop">
                <p>&#8921;</p>
                <p>VIEW&nbsp;MORE</p>
            </a>
        </div>
    </div>
</section>

<!-- computer accesories -->
<section class="computer-accessories main-container">
    <h3>Computer Accessories</h3>
    <div class="products flex">
        <%if(true){%>
        <%let count = 0 %>
        <% for(let i=0; i< products.length; i++){ %>
        <%if(count===4){break;} %>
        <%count++%>
        <%if(products[i].category === 'accessories'){%>
        <div class="product flex">
            <a href="/product/<%=products[i].id%>">
            <div class="product-img">
                <img src="/images/productImages/<%=products[i].images.split(',')[0]%>" alt="">
            </div>
            </a>
            <p class="name"><%=products[i].name%></p>
            <p class="description"><%=products[i].specifications.slice(0,45)%>...</p>
            <%let n =products[i].price.toString().length%>
            <%if(n>3){%>
                <p class="price">KSH. <%=products[i].price.toString().slice(0,n-3) + ',' + products[i].price.toString().slice(n-3)%></p>
            <%}else{%>
                <p class="price">KSH. <%=products[i].price%></p>
            <%}%>            
            <div class="ratings flex">
                <p>rated: 0</p>
                <p>0 reviews</p>
            </div>
            <%if(!locals.isLoggedIn){%>
                <div class="add-to-cart add-to-cart-btn">
                    +&nbsp;ADD&nbsp;TO&nbsp;CART
                </div>
            <%}else{%>
                <form class="add-to-cart add-to-cart-link" action="/add-to-cart?pId=<%=products[i].id%>&pName=<%=products[i].name%>&location=," method="post">
                    <input type="submit" value="+ ADD TO CART">
                </form>
            <%}%>
        </div> 
        <%}else{count--}%>
        <%}%>
        <%}%>
        <div class="view-more-btn flex">
            <a href="/products?category=accessories">
                <p>&#8921;</p>
                <p>VIEW&nbsp;MORE</p>
            </a>
        </div>
    </div>
</section>

<!-- office supplies -->
<section class="computer-accessories main-container">
    <h3>Office Supplies</h3>
    <div class="products flex">
        <%if(true){%>
        <%let count = 0 %>
        <% for(let i=0; i< products.length; i++){ %>
        <%if(count===4){break;} %>
        <%count++%>
        <%if(products[i].category === 'supplies'){%>
        <div class="product flex">
            <a href="/product/<%=products[i].id%>">
            <div class="product-img">
                <img src="/images/productImages/<%=products[i].images.split(',')[0]%>" alt="">
            </div>
            </a>
            <p class="name"><%=products[i].name%></p>
            <p class="description"><%=products[i].specifications.slice(0,45)%>...</p>
            <%let n =products[i].price.toString().length%>
            <%if(n>3){%>
                <p class="price">KSH. <%=products[i].price.toString().slice(0,n-3) + ',' + products[i].price.toString().slice(n-3)%></p>
            <%}else{%>
                <p class="price">KSH. <%=products[i].price%></p>
            <%}%>
            <div class="ratings flex">
                <p>rated: 0</p>
                <p>0 reviews</p>
            </div>
            <%if(!locals.isLoggedIn){%>
                <div class="add-to-cart add-to-cart-btn">
                    +&nbsp;ADD&nbsp;TO&nbsp;CART
                </div>
            <%}else{%>
                <form class="add-to-cart add-to-cart-link" action="/add-to-cart?pId=<%=products[i].id%>&pName=<%=products[i].name%>&location=," method="post">
                    <input type="submit" value="+ ADD TO CART">
                </form>
            <%}%>
        </div> 
        <%}else{count--}%>
        <%}%>
        <%}%>
        <div class="view-more-btn flex">
            <a href="/products?category=supplies">
                <p>&#8921;</p>
                <p>VIEW&nbsp;MORE</p>
            </a>
        </div>
    </div>
</section>

<div class="login-modal" id="login-modal">
    <div class="login-modal-content">
        <p>Login to use cart</p>
        <button class="close-modal-btn">CLOSE</button>
        <a href="/reg"><button class="login-link-btn">LOGIN</button></a>
    </div>
</div>

<script>
    document.querySelectorAll('.close-modal-btn').forEach(closeModalBtn=>{
        closeModalBtn.addEventListener('click', (e)=>{
            e.target.parentElement.parentElement.style.display='none'
        })   
    })
    document.querySelectorAll('.add-to-cart-btn').forEach(addToCartBtn=>{
        addToCartBtn.addEventListener('click', ()=>{
            document.getElementById('login-modal').style.display='block'
        })   
    })
    document.getElementById('login-modal').addEventListener('click',()=>{
        document.getElementById('login-modal').style.display='none'
    })
    // window.addEventListener('click',()=>{
    //     document.getElementById('login-modal').style.display='none'
    // })
    const first = document.querySelector('.slide');
    const slide = () => {
        const before = document.querySelector('.showing');
        if (before) {
            before.classList.remove('showing');
            const next = before.nextElementSibling;
            if (next) {
                next.classList.add('showing')
            } else {
                first.classList.add('showing');
            }
        } else {
            first.classList.add('showing');
        }
    }
    slide();
    setInterval(slide, 8000);
</script>
<%- include('./partials/footer')%>